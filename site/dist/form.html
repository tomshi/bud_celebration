<!DOCTYPE html> <html> <head> <meta charset=UTF-8> <meta name=viewport content="initial-scale=1,maximum-scale=1,width=device-width,user-scalable=yes,minimal-ui"> <title>百威庆祝</title> <link rel=stylesheet href=css/main.css> <script src=js/vendor.js></script> <meta name=renderer content=webkit> <meta name=google value=notranslate>  <body> <div id=wrapper> <section id=stage> <div class=frame id=form style="display: block"> <div class=table> <div class=table-cell> <div class=header> <div class=text1><img src=img/form-text1.png class=responsive alt=""></div> <div class=headline><img src=img/form-headline.png class=responsive alt=""></div> <div class=text2><img src=img/form-text2.png class=responsive alt=""></div> </div> <div class=inputs> <div class="input name"> <input placeholder=为谁欢庆> </div> <div class="input type"> <input placeholder=庆祝什么> </div> <div class="input time"> <input placeholder=在哪一天> </div> <a href=## class=submit></a> <div class=upload> <input type=file class=file name=files id="fileupload_input"> <div class=text>+ 上传一张照片，获得更专属的体验</div> </div> </div> </div> </div> </div> </section> <div id=hand><img src=img/hand.png></div> </div> <section class=overlay> <div class=crop> <img id=uploadImgHolder src="" alt=""> </div> </section> <script src=js/plugins.js></script> <script src=js/main.js></script> <script type=text/javascript>var holder = $("#uploadImgHolder");
        function initCropImg(src){
            holder.attr("src", src);
            $(".overlay").show();
            $(".crop > img").cropper({
                aspectRatio: 1.777,
                width: 500,
                done: function(data) {
                    // Crop image with the result data.
                    console.log(data.x);
                    console.log(data.y);
                    console.log(data.height);
                    console.log(data.width);
                }
            });
        }
        $(function(){
            $("#fileupload_input").fileupload({
                url:"api/upload.json",//文件上传地址，当然也可以直接写在input的data-url属性内
                formData:{param1:"p1",param2:"p2"},//如果需要额外添加参数可以在这里添加
                done:function(e,result){
                    //done方法就是上传完毕的回调函数，其他回调函数可以自行查看api
                    //注意result要和jquery的ajax的data参数区分，这个对象包含了整个请求信息
                    //返回的数据在result.result中，假设我们服务器返回了一个json对象
                    console.log(JSON.stringify(result.result));
                    initCropImg();
                }
            });
        });</script>  